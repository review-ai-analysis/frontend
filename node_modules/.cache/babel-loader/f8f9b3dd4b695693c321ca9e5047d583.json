{"ast":null,"code":"import s from '../pages/analysis/Analysis.module.scss';\n\nvar CircleProgress = function CircleProgress(selector) {\n  var wrapper = document.querySelectorAll(selector);\n  Array.prototype.forEach.call(wrapper, function (wrapper, i) {\n    var wrapperWidth, wrapperHeight, percent, innerHTML, canvas, context, lineWidth, centerX, centerY, radius, newPercent, from, to, duration, start, text;\n\n    var getValues = function getValues() {\n      wrapperWidth = parseInt(window.getComputedStyle(wrapper).width);\n      wrapperHeight = wrapperWidth;\n      percent = wrapper.getAttribute('data-cp-percentage');\n      innerHTML = \"<span class=\".concat(s.percentage, \"><strong>\") + percent + '</strong> %</span><canvas class=\"circleProgressCanvas\" width=\"' + wrapperWidth * 2 + '\" height=\"' + wrapperHeight * 2 + '\"></canvas>';\n      wrapper.innerHTML = innerHTML;\n      text = document.getElementsByClassName(\"\".concat(s.percentage))[i];\n      canvas = document.getElementsByClassName('circleProgressCanvas')[i];\n      wrapper.style.height = canvas.style.width = canvas.style.height = wrapperWidth + \"px\";\n      context = canvas.getContext('2d');\n      centerX = canvas.width / 2;\n      centerY = canvas.height / 2;\n      newPercent = 0;\n      from = 0;\n      to = percent;\n      duration = 3000;\n      lineWidth = 40;\n      radius = canvas.width / 2 - lineWidth;\n      start = new Date().getTime();\n    };\n\n    function getColor(value) {\n      var hue = (value * 120).toString(10);\n      return [\"hsl(\", hue, \",100%,50%)\"].join(\"\");\n    }\n\n    function animate() {\n      requestAnimationFrame(animate);\n      var time = new Date().getTime() - start;\n\n      if (time <= duration) {\n        var x = easeInOutQuart(time, from, to - from, duration);\n        newPercent = x;\n        text.innerHTML = newPercent.toFixed(1);\n        text.style.color = 'white';\n        drawArc(newPercent);\n      }\n    }\n\n    function drawArc(newPercent) {\n      var circleStart = 1.5 * Math.PI;\n      var circleEnd = circleStart + newPercent / 2.5 * Math.PI;\n      context.clearRect(0, 0, canvas.width, canvas.height);\n      context.beginPath();\n      context.arc(centerX, centerY, radius, circleStart, 4 * Math.PI, false);\n      context.lineWidth = lineWidth;\n      context.strokeStyle = 'transparent'; // #acd1e3\n\n      context.stroke();\n      context.beginPath();\n      context.arc(centerX, centerY, radius, circleStart, circleEnd, false);\n      context.lineWidth = lineWidth;\n      context.strokeStyle = getColor(newPercent < 1 ? 0 : (newPercent - 1) / 4);\n      context.stroke();\n    }\n\n    var update = function update() {\n      getValues();\n      animate();\n    };\n\n    update();\n    var resizeTimer;\n    window.addEventListener(\"resize\", function () {\n      clearTimeout(resizeTimer);\n      resizeTimer = setTimeout(function () {\n        clearTimeout(resizeTimer);\n        start = new Date().getTime();\n        update();\n      }, 250);\n    });\n  });\n\n  function easeInOutQuart(t, b, c, d) {\n    if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;\n    return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n  }\n};\n\nexport default CircleProgress;","map":{"version":3,"sources":["C:/Users/Vladislav/Desktop/SmartCitySirius/site/src/components/CircleProgress/CircleProgress.js"],"names":["s","CircleProgress","selector","wrapper","document","querySelectorAll","Array","prototype","forEach","call","i","wrapperWidth","wrapperHeight","percent","innerHTML","canvas","context","lineWidth","centerX","centerY","radius","newPercent","from","to","duration","start","text","getValues","parseInt","window","getComputedStyle","width","getAttribute","percentage","getElementsByClassName","style","height","getContext","Date","getTime","getColor","value","hue","toString","join","animate","requestAnimationFrame","time","x","easeInOutQuart","toFixed","color","drawArc","circleStart","Math","PI","circleEnd","clearRect","beginPath","arc","strokeStyle","stroke","update","resizeTimer","addEventListener","clearTimeout","setTimeout","t","b","c","d"],"mappings":"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","sourcesContent":["import s from '../pages/analysis/Analysis.module.scss';\r\n\r\nlet CircleProgress = (function(selector) {\r\n\tlet wrapper = document.querySelectorAll(selector);\r\n\tArray.prototype.forEach.call(wrapper, function(wrapper, i) {\r\n\t\tlet wrapperWidth,\r\n\t\t\twrapperHeight,\r\n\t\t\tpercent,\r\n\t\t\tinnerHTML,\r\n\t\t\tcanvas,\r\n\t\t\tcontext,\r\n\t\t\tlineWidth,\r\n\t\t\tcenterX,\r\n\t\t\tcenterY,\r\n\t\t\tradius,\r\n\t\t\tnewPercent,\r\n\t\t\tfrom,\r\n\t\t\tto,\r\n\t\t\tduration,\r\n\t\t\tstart,\r\n\t\t\ttext;\r\n\r\n\t\tlet getValues = function() {\r\n\t\t\twrapperWidth = parseInt(window.getComputedStyle(wrapper).width);\r\n\t\t\twrapperHeight = wrapperWidth;\r\n\t\t\tpercent = wrapper.getAttribute('data-cp-percentage');\r\n\t\t\tinnerHTML = `<span class=${s.percentage}><strong>` + \r\n\t\t\t\t\t\tpercent + '</strong> %</span><canvas class=\"circleProgressCanvas\" width=\"' + \r\n\t\t\t\t\t\t(wrapperWidth * 2) + '\" height=\"' + wrapperHeight * 2 + '\"></canvas>';\r\n\t\t\twrapper.innerHTML = innerHTML;\r\n\t\t\ttext = document.getElementsByClassName(`${s.percentage}`)[i]\r\n\t\t\tcanvas = document.getElementsByClassName('circleProgressCanvas')[i]\r\n\t\t\twrapper.style.height = canvas.style.width = canvas.style.height = wrapperWidth + \"px\";\r\n\t\t\tcontext = canvas.getContext('2d');\r\n\t\t\tcenterX = canvas.width / 2;\r\n\t\t\tcenterY = canvas.height / 2;\r\n\t\t\tnewPercent = 0;\r\n\t\t\tfrom = 0;\r\n\t\t\tto = percent;\r\n\t\t\tduration = 3000;\r\n\t\t\tlineWidth = 40;\r\n\t\t\tradius = canvas.width / 2 - lineWidth;\r\n\t\t\tstart = new Date().getTime();\r\n\t\t};\r\n\r\n\t\tfunction getColor(value) {\r\n\t\t\tvar hue = (value * 120).toString(10);\r\n\t\t\treturn [\"hsl(\", hue, \",100%,50%)\"].join(\"\");\r\n\t\t}\r\n\r\n\t\tfunction animate() {\r\n\t\t\trequestAnimationFrame(animate);\r\n\t\t\tlet time = new Date().getTime() - start;\r\n\t\t\tif (time <= duration) {\r\n\t\t\t\tlet x = easeInOutQuart(time, from, to - from, duration);\r\n\t\t\t\tnewPercent = x;\r\n\t\t\t\ttext.innerHTML = newPercent.toFixed(1);\r\n\t\t\t\ttext.style.color = 'white';\r\n\t\t\t\tdrawArc(newPercent);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction drawArc(newPercent) {\r\n\t\t\tlet circleStart = 1.5 * Math.PI;\r\n\t\t\tlet circleEnd = circleStart + (newPercent / 2.5) * Math.PI;\r\n\t\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.arc(centerX, centerY, radius, circleStart, 4 * Math.PI, false);\r\n\t\t\tcontext.lineWidth = lineWidth;\r\n\t\t\tcontext.strokeStyle = 'transparent'; // #acd1e3\r\n\t\t\tcontext.stroke();\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.arc(centerX, centerY, radius, circleStart, circleEnd, false);\r\n\t\t\tcontext.lineWidth = lineWidth;\r\n\t\t\tcontext.strokeStyle = getColor((newPercent < 1) ? 0 : ((newPercent - 1) / 4));\r\n\t\t\tcontext.stroke();\r\n\t\t}\r\n\r\n\t\tlet update = function() {\r\n\t\t\tgetValues();\r\n\t\t\tanimate();\r\n\t\t}\r\n\t\tupdate();\r\n\r\n\t\tlet resizeTimer;\r\n\t\twindow.addEventListener(\"resize\", function() {\r\n\t\t\tclearTimeout(resizeTimer);\r\n\t\t\tresizeTimer = setTimeout(function() {\r\n\t\t\t\tclearTimeout(resizeTimer);\r\n\t\t\t\tstart = new Date().getTime();\r\n\t\t\t\tupdate();\r\n\t\t\t}, 250);\r\n\t\t});\r\n\t});\r\n\r\n\tfunction easeInOutQuart(t, b, c, d) {\r\n\t\tif ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;\r\n\t\treturn -c / 2 * ((t -= 2) * t * t * t - 2) + b;\r\n\t}\r\n});\r\n\r\nexport default CircleProgress;"]},"metadata":{},"sourceType":"module"}